"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

(function (factory) {
  if ((typeof exports === "undefined" ? "undefined" : _typeof(exports)) === 'object') {
    // Node. Does not work with strict CommonJS.
    module.exports = factory(true);
  } else {
    // Browser globals.
    // @ts-ignore
    window.Webyarns = factory();
  }
})(function () {
  var exposeAllForTests = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

  var compose = function compose(f, g) {
    return function (x) {
      return g(f(x));
    };
  };

  var attributeNames = function attributeNames(e) {
    return Array.from(e.attributes).map(function (a) {
      return a.name;
    });
  };

  var oneOfContainedIn = function oneOfContainedIn(a2) {
    return function (a1) {
      return a1.some(function (r) {
        return a2.includes(r);
      });
    };
  };

  var containsOneOfAttributes = function containsOneOfAttributes(names) {
    return compose(attributeNames, oneOfContainedIn(names));
  }; // @ts-ignore


  var isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
  /******
   * Count the number of direct siblings matching a selector,
   ******/

  var count = function count(sb) {
    var fn = function fn(e, attributeNames) {
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var next = sb(e);
      return next && containsOneOfAttributes(attributeNames)(next) ? fn(next, attributeNames, i + 1) : i;
    };

    return fn;
  };

  var countNext = count(function (n) {
    return n.nextElementSibling;
  });
  var countPrev = count(function (n) {
    return n.previousElementSibling;
  });
  /******
   * Count the number of direct hidden sections
   ******/

  var genericHidingElements = ["data-hidden-section", isTouchDevice ? "data-non-touch-only-section" : "data-touch-only-section"];

  var countHiddenSiblings = function countHiddenSiblings(fn) {
    return function (e) {
      return fn(e, genericHidingElements);
    };
  };

  var noOfHiddenLeft = function noOfHiddenLeft(e) {
    if (e.getAttribute("data-autoslide")) return 0;
    return countPrev(e, ["data-right-only-section"].concat(genericHidingElements));
  };

  var noOfHiddenRight = function noOfHiddenRight(e) {
    if (e.getAttribute("data-autoslide")) return 0;
    return countNext(e, ["data-left-only-section"].concat(genericHidingElements));
  };
  /******
   * Support for next-slide-idx
   ******/


  var getNextSlideIndexH = function getNextSlideIndexH(e) {
    var s = e.getAttribute("data-next-slide-indexh");

    try {
      return s ? parseInt(s, 10) : null;
    } catch (e) {
      throw Error("data-next-slide-indexh, must be a number, got ".concat(s));
    }
  };

  var lookupIndex = function lookupIndex(id) {
    var slides = document.querySelector(".slides");
    var f = document.getElementById(id);
    return slides && f ? Array.from(slides.children).indexOf(f) : -1;
  };
  /******
   * Exports
   ******/


  var Webyarns = {
    noOfHiddenLeft: noOfHiddenLeft,
    noOfHiddenRight: noOfHiddenRight,
    getNextSlideIndexH: getNextSlideIndexH,
    lookupIndex: lookupIndex
  };

  if (exposeAllForTests) {
    // For Jest
    Webyarns.countNext = countNext;
    Webyarns.countPrev = countPrev;
  }

  return Webyarns;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9oZWxwZXJzLnRzIl0sIm5hbWVzIjpbImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwid2luZG93IiwiV2VieWFybnMiLCJleHBvc2VBbGxGb3JUZXN0cyIsImNvbXBvc2UiLCJmIiwiZyIsIngiLCJhdHRyaWJ1dGVOYW1lcyIsImUiLCJBcnJheSIsImZyb20iLCJhdHRyaWJ1dGVzIiwibWFwIiwiYSIsIm5hbWUiLCJvbmVPZkNvbnRhaW5lZEluIiwiYTIiLCJhMSIsInNvbWUiLCJyIiwiaW5jbHVkZXMiLCJjb250YWluc09uZU9mQXR0cmlidXRlcyIsIm5hbWVzIiwiaXNUb3VjaERldmljZSIsIm5hdmlnYXRvciIsIm1heFRvdWNoUG9pbnRzIiwibXNNYXhUb3VjaFBvaW50cyIsImNvdW50Iiwic2IiLCJmbiIsImkiLCJuZXh0IiwiY291bnROZXh0IiwibiIsIm5leHRFbGVtZW50U2libGluZyIsImNvdW50UHJldiIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJnZW5lcmljSGlkaW5nRWxlbWVudHMiLCJjb3VudEhpZGRlblNpYmxpbmdzIiwibm9PZkhpZGRlbkxlZnQiLCJnZXRBdHRyaWJ1dGUiLCJub09mSGlkZGVuUmlnaHQiLCJnZXROZXh0U2xpZGVJbmRleEgiLCJzIiwicGFyc2VJbnQiLCJFcnJvciIsImxvb2t1cEluZGV4IiwiaWQiLCJzbGlkZXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRFbGVtZW50QnlJZCIsImNoaWxkcmVuIiwiaW5kZXhPZiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFDLFdBQVVBLE9BQVYsRUFBbUI7QUFDaEIsTUFBSSxRQUFPQyxPQUFQLHlDQUFPQSxPQUFQLE9BQW1CLFFBQXZCLEVBQWlDO0FBQzdCO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0QsT0FBUCxHQUFpQkQsT0FBTyxDQUFDLElBQUQsQ0FBeEI7QUFDSCxHQUhELE1BR087QUFDSDtBQUVBO0FBQ0FHLElBQUFBLE1BQU0sQ0FBQ0MsUUFB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a0I7QUFHbEJDLElBQUFBLGtCQUFrQixFQUFsQkEsa0JBSGtCO0FBSWxCSSxJQUFBQSxXQUFXLEVBQVhBO0FBSmtCLEdBQXRCOztBQVFBLE1BQUk1QyxpQkFBSixFQUF1QjtBQUNuQjtBQUNBRCxJQUFBQSxRQUFRLENBQUMrQixTQUFULEdBQXFCQSxTQUFyQjtBQUNBL0IsSUFBQUEsUUFBUSxDQUFDa0MsU0FBVCxHQUFxQkEsU0FBckI7QUFDSDs7QUFFRCxTQUFPbEMsUUFBUDtBQUNILENBL0ZBLENBQUQiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMuXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMuXG5cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB3aW5kb3cuV2VieWFybnMgPSBmYWN0b3J5KCk7XG4gICAgfVxufSgoZXhwb3NlQWxsRm9yVGVzdHM6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuXG4gICAgY29uc3QgY29tcG9zZSA9IDxBLCBCLCBDPihmOiAoYXJnOiBBKSA9PiBCLCBnOiAoYXJnOiBCKSA9PiBDKTogKGFyZzogQSkgPT4gQyA9PiB4ID0+IGcoZih4KSk7XG4gICAgY29uc3QgYXR0cmlidXRlTmFtZXM6IChlOiBFbGVtZW50KSA9PiBzdHJpbmdbXSA9IChlOiBFbGVtZW50KSA9PiBBcnJheS5mcm9tKGUuYXR0cmlidXRlcykubWFwKGEgPT4gYS5uYW1lKTtcbiAgICBjb25zdCBvbmVPZkNvbnRhaW5lZEluID0gPFQ+KGEyOiBBcnJheTxUPikgPT4gKGExOiBBcnJheTxUPikgPT4gYTEuc29tZShyID0+IGEyLmluY2x1ZGVzKHIpKTtcbiAgICBjb25zdCBjb250YWluc09uZU9mQXR0cmlidXRlcyA9IChuYW1lczogc3RyaW5nW10pID0+IGNvbXBvc2UoYXR0cmlidXRlTmFtZXMsIG9uZU9mQ29udGFpbmVkSW4obmFtZXMpKTtcblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBpc1RvdWNoRGV2aWNlOiBib29sZWFuID0gKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgKG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDApIHx8IChuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApO1xuXG4gICAgLyoqKioqKlxuICAgICAqIENvdW50IHRoZSBudW1iZXIgb2YgZGlyZWN0IHNpYmxpbmdzIG1hdGNoaW5nIGEgc2VsZWN0b3IsXG4gICAgICoqKioqKi9cbiAgICBjb25zdCBjb3VudCA9IChzYjogKGU6IEVsZW1lbnQpID0+IEVsZW1lbnQgfCBudWxsKSA9PiB7XG4gICAgICAgIGNvbnN0IGZuID0gKGU6IEVsZW1lbnQsIGF0dHJpYnV0ZU5hbWVzOiBzdHJpbmdbXSwgaSA9IDApOiBudW1iZXIgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHNiKGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5leHQgJiYgY29udGFpbnNPbmVPZkF0dHJpYnV0ZXMoYXR0cmlidXRlTmFtZXMpKG5leHQpID8gZm4obmV4dCwgYXR0cmlidXRlTmFtZXMsIGkgKyAxKSA6IGk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmblxuICAgIH07XG5cblxuICAgIGNvbnN0IGNvdW50TmV4dDogKGU6IEVsZW1lbnQsIG5hbWVzOiBzdHJpbmdbXSkgPT4gbnVtYmVyID0gY291bnQobiA9PiBuLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgY29uc3QgY291bnRQcmV2OiAoZTogRWxlbWVudCwgbmFtZXM6IHN0cmluZ1tdKSA9PiBudW1iZXIgPSBjb3VudChuID0+IG4ucHJldmlvdXNFbGVtZW50U2libGluZyk7XG5cbiAgICAvKioqKioqXG4gICAgICogQ291bnQgdGhlIG51bWJlciBvZiBkaXJlY3QgaGlkZGVuIHNlY3Rpb25zXG4gICAgICoqKioqKi9cbiAgICBjb25zdCBnZW5lcmljSGlkaW5nRWxlbWVudHMgPSBbXG4gICAgICAgIFwiZGF0YS1oaWRkZW4tc2VjdGlvblwiLFxuICAgICAgICBpc1RvdWNoRGV2aWNlID8gXCJkYXRhLW5vbi10b3VjaC1vbmx5LXNlY3Rpb25cIiA6IFwiZGF0YS10b3VjaC1vbmx5LXNlY3Rpb25cIlxuICAgIF07XG4gICAgY29uc3QgY291bnRIaWRkZW5TaWJsaW5ncyA9IChmbjogKGU6IEVsZW1lbnQsIG5hbWVzOiBzdHJpbmdbXSkgPT4gbnVtYmVyKSA9PiAoZTogRWxlbWVudCkgPT4gZm4oZSwgZ2VuZXJpY0hpZGluZ0VsZW1lbnRzKTtcblxuICAgIGNvbnN0IG5vT2ZIaWRkZW5MZWZ0ID0gKGU6IEVsZW1lbnQpID0+IHtcbiAgICAgICAgaWYgKGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdXRvc2xpZGVcIikpXG4gICAgICAgICAgICByZXR1cm4gMFxuICAgICAgICByZXR1cm4gY291bnRQcmV2KGUsIFtcImRhdGEtcmlnaHQtb25seS1zZWN0aW9uXCIsIC4uLmdlbmVyaWNIaWRpbmdFbGVtZW50c10pO1xuICAgIH1cbiAgICBjb25zdCBub09mSGlkZGVuUmlnaHQgPSAoZTogRWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG9zbGlkZVwiKSlcbiAgICAgICAgICAgIHJldHVybiAwXG4gICAgICAgIHJldHVybiBjb3VudE5leHQoZSwgW1wiZGF0YS1sZWZ0LW9ubHktc2VjdGlvblwiLCAuLi5nZW5lcmljSGlkaW5nRWxlbWVudHNdKTtcbiAgICB9XG5cblxuICAgIC8qKioqKipcbiAgICAgKiBTdXBwb3J0IGZvciBuZXh0LXNsaWRlLWlkeFxuICAgICAqKioqKiovXG5cbiAgICBjb25zdCBnZXROZXh0U2xpZGVJbmRleEggPSAoZTogRWxlbWVudCk6IG51bWJlciB8IG51bGwgPT4ge1xuICAgICAgICBjb25zdCBzID0gZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLW5leHQtc2xpZGUtaW5kZXhoXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHMgPyBwYXJzZUludChzLCAxMCkgOiBudWxsXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBkYXRhLW5leHQtc2xpZGUtaW5kZXhoLCBtdXN0IGJlIGEgbnVtYmVyLCBnb3QgJHtzfWApO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgY29uc3QgbG9va3VwSW5kZXggPSAoaWQ6IHN0cmluZyk6IG51bWJlciA9PiB7XG4gICAgICAgIGNvbnN0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVzXCIpO1xuICAgICAgICBjb25zdCBmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gKHNsaWRlcyAmJiBmKSA/IEFycmF5LmZyb20oc2xpZGVzLmNoaWxkcmVuKS5pbmRleE9mKGYpIDogLTE7XG4gICAgfTtcblxuXG4gICAgLyoqKioqKlxuICAgICAqIEV4cG9ydHNcbiAgICAgKioqKioqL1xuICAgIGNvbnN0IFdlYnlhcm5zOiBhbnkgPSB7XG4gICAgICAgIG5vT2ZIaWRkZW5MZWZ0LFxuICAgICAgICBub09mSGlkZGVuUmlnaHQsXG4gICAgICAgIGdldE5leHRTbGlkZUluZGV4SCxcbiAgICAgICAgbG9va3VwSW5kZXgsXG4gICAgfTtcblxuXG4gICAgaWYgKGV4cG9zZUFsbEZvclRlc3RzKSB7XG4gICAgICAgIC8vIEZvciBKZXN0XG4gICAgICAgIFdlYnlhcm5zLmNvdW50TmV4dCA9IGNvdW50TmV4dDtcbiAgICAgICAgV2VieWFybnMuY291bnRQcmV2ID0gY291bnRQcmV2O1xuICAgIH1cblxuICAgIHJldHVybiBXZWJ5YXJucztcbn0pKTtcblxuXG5cblxuXG5cbiJdfQ==