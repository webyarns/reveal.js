"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

(function (factory) {
  if ((typeof exports === "undefined" ? "undefined" : _typeof(exports)) === 'object') {
    // Node. Does not work with strict CommonJS.
    module.exports = factory(true);
  } else {
    // Browser globals.
    window.Webyarns = factory();
  }
})(function () {
  var exposeAllForTests = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

  var compose = function compose(f, g) {
    return function (x) {
      return g(f(x));
    };
  };

  var attributeNames = function attributeNames(e) {
    return Array.from(e.attributes).map(function (a) {
      return a.name;
    });
  };

  var oneOfContainedIn = function oneOfContainedIn(a2) {
    return function (a1) {
      return a1.some(function (r) {
        return a2.includes(r);
      });
    };
  };

  var containsOneOfAttributes = function containsOneOfAttributes(names) {
    return compose(attributeNames, oneOfContainedIn(names));
  };

  var isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
  /******
   * Count the number of direct siblings matching a selector,
   ******/

  var count = function count(sb) {
    var fn = function fn(e, attributeNames) {
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var next = sb(e);
      return next && containsOneOfAttributes(attributeNames)(next) ? fn(next, attributeNames, i + 1) : i;
    };

    return fn;
  };

  var countNext = count(function (n) {
    return n.nextElementSibling;
  });
  var countPrev = count(function (n) {
    return n.previousElementSibling;
  });
  /******
   * Count the number of direct hidden sections
   ******/

  var genericHidingElements = ["data-hidden-section", isTouchDevice ? "data-non-touch-only-section" : "data-touch-only-section"];

  var countHiddenSiblings = function countHiddenSiblings(fn) {
    return function (e) {
      return fn(e, genericHidingElements);
    };
  };

  var noOfHiddenLeft = function noOfHiddenLeft(e) {
    if (e.getAttribute("data-autoslide")) return 0;
    return countPrev(e, ["data-right-only-section"].concat(genericHidingElements));
  };

  var noOfHiddenRight = function noOfHiddenRight(e) {
    if (e.getAttribute("data-autoslide")) return 0;
    return countNext(e, ["data-left-only-section"].concat(genericHidingElements));
  };
  /******
   * Support for next-slide-idx
   ******/


  var getNextSlideIndexH = function getNextSlideIndexH(e) {
    var s = e.getAttribute("data-next-slide-indexh");

    try {
      return s ? parseInt(s, 10) : null;
    } catch (e) {
      throw Error("data-next-slide-indexh, must be a number, got ".concat(s));
    }
  };

  var lookupIndex = function lookupIndex(id) {
    var slides = document.querySelector(".slides");
    var f = document.getElementById(id);
    return slides && f ? Array.from(slides.children).indexOf(f) : -1;
  };
  /******
   * Exports
   ******/


  var Webyarns = {
    noOfHiddenLeft: noOfHiddenLeft,
    noOfHiddenRight: noOfHiddenRight,
    getNextSlideIndexH: getNextSlideIndexH,
    lookupIndex: lookupIndex
  };

  if (exposeAllForTests) {
    // For Jest
    Webyarns.countNext = countNext;
    Webyarns.countPrev = countPrev;
  }

  return Webyarns;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9oZWxwZXJzLnRzIl0sIm5hbWVzIjpbImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwid2luZG93IiwiV2VieWFybnMiLCJleHBvc2VBbGxGb3JUZXN0cyIsImNvbXBvc2UiLCJmIiwiZyIsIngiLCJhdHRyaWJ1dGVOYW1lcyIsImUiLCJBcnJheSIsImZyb20iLCJhdHRyaWJ1dGVzIiwibWFwIiwiYSIsIm5hbWUiLCJvbmVPZkNvbnRhaW5lZEluIiwiYTIiLCJhMSIsInNvbWUiLCJyIiwiaW5jbHVkZXMiLCJjb250YWluc09uZU9mQXR0cmlidXRlcyIsIm5hbWVzIiwiaXNUb3VjaERldmljZSIsIm5hdmlnYXRvciIsIm1heFRvdWNoUG9pbnRzIiwibXNNYXhUb3VjaFBvaW50cyIsImNvdW50Iiwic2IiLCJmbiIsImkiLCJuZXh0IiwiY291bnROZXh0IiwibiIsIm5leHRFbGVtZW50U2libGluZyIsImNvdW50UHJldiIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJnZW5lcmljSGlkaW5nRWxlbWVudHMiLCJjb3VudEhpZGRlblNpYmxpbmdzIiwibm9PZkhpZGRlbkxlZnQiLCJnZXRBdHRyaWJ1dGUiLCJub09mSGlkZGVuUmlnaHQiLCJnZXROZXh0U2xpZGVJbmRleEgiLCJzIiwicGFyc2VJbnQiLCJFcnJvciIsImxvb2t1cEluZGV4IiwiaWQiLCJzbGlkZXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRFbGVtZW50QnlJZCIsImNoaWxkcmVuIiwiaW5kZXhPZiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFDLFdBQVVBLE9BQVYsRUFBbUI7QUFDaEIsTUFBSSxRQUFPQyxPQUFQLHlDQUFPQSxPQUFQLE9BQW1CLFFBQXZCLEVBQWlDO0FBQzdCO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0QsT0FBUCxHQUFpQkQsT0FBTyxDQUFDLElBQUQsQ0FBeEI7QUFDSCxHQUhELE1BR087QUFDSDtBQUVBRyxJQUFBQSxNQUFNLENBQUNDLFFBQVAsR0FBa0JKLE9BQU8sRUFBekI7QUFDSDtBQUNKLENBVEEsRUFTQyxZQUF3QztBQUFBLE1BQXZDSyxpQkFBdUMsdUVBQVYsS0FBVTs7QUFFdEMsTUFBTUMsT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBVUMsQ0FBVixFQUE0QkMsQ0FBNUI7QUFBQSxXQUFnRSxVQUFBQyxDQUFDO0FBQUEsYUFBSUQsQ0FBQyxDQUFDRCxDQUFDLENBQUNFLENBQUQsQ0FBRixDQUFMO0FBQUEsS0FBakU7QUFBQSxHQUFoQjs7QUFDQSxNQUFNQyxjQUF3QyxHQUFHLFNBQTNDQSxjQUEyQyxDQUFDQyxDQUFEO0FBQUEsV0FBZ0JDLEtBQUssQ0FBQ0MsSUFBTixDQUFXRixDQUFDLENBQUNHLFVBQWIsRUFBeUJDLEdBQXpCLENBQTZCLFVBQUFDLENBQUM7QUFBQSxhQUFJQSxDQUFDLENBQUNDLElBQU47QUFBQSxLQUE5QixDQUFoQjtBQUFBLEdBQWpEOztBQUNBLE1BQU1DLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBbUIsQ0FBSUMsRUFBSjtBQUFBLFdBQXFCLFVBQUNDLEVBQUQ7QUFBQSxhQUFrQkEsRUFBRSxDQUFDQyxJQUFILENBQVEsVUFBQUMsQ0FBQztBQUFBLGVBQUlILEVBQUUsQ0FBQ0ksUUFBSCxDQUFZRCxDQUFaLENBQUo7QUFBQSxPQUFULENBQWxCO0FBQUEsS0FBckI7QUFBQSxHQUF6Qjs7QUFDQSxNQUFNRSx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQTBCLENBQUNDLEtBQUQ7QUFBQSxXQUFxQm5CLE9BQU8sQ0FBQ0ksY0FBRCxFQUFpQlEsZ0JBQWdCLENBQUNPLEtBQUQsQ0FBakMsQ0FBNUI7QUFBQSxHQUFoQzs7QUFFQSxNQUFNQyxhQUFzQixHQUFJLGtCQUFrQnZCLE1BQW5CLElBQzFCd0IsU0FBUyxDQUFDQyxjQUFWLEdBQTJCLENBREQsSUFFMUJELFNBQVMsQ0FBQ0UsZ0JBQVYsR0FBNkIsQ0FGbEM7QUFJQTtBQUNKO0FBQ0E7O0FBQ0ksTUFBTUMsS0FBSyxHQUFHLFNBQVJBLEtBQVEsQ0FBQ0MsRUFBRCxFQUF3QztBQUNsRCxRQUFNQyxFQUFFLEdBQUcsU0FBTEEsRUFBSyxDQUFDckIsQ0FBRCxFQUFhRCxjQUFiLEVBQXlEO0FBQUEsVUFBbEJ1QixDQUFrQix1RUFBZCxDQUFjO0FBQ2hFLFVBQU1DLElBQUksR0FBR0gsRUFBRSxDQUFDcEIsQ0FBRCxDQUFmO0FBQ0EsYUFBT3VCLElBQUksSUFBSVYsdUJBQXVCLENBQUNkLGNBQUQsQ0FBdkIsQ0FBd0N3QixJQUF4QyxDQUFSLEdBQXdERixFQUFFLENBQUNFLElBQUQsRUFBT3hCLGNBQVAsRUFBdUJ1QixDQUFDLEdBQUcsQ0FBM0IsQ0FBMUQsR0FBMEZBLENBQWpHO0FBQ0gsS0FIRDs7QUFJQSxXQUFPRCxFQUFQO0FBQ0gsR0FORDs7QUFTQSxNQUFNRyxTQUFrRCxHQUFHTCxLQUFLLENBQUMsVUFBQU0sQ0FBQztBQUFBLFdBQUlBLENBQUMsQ0FBQ0Msa0JBQU47QUFBQSxHQUFGLENBQWhFO0FBQ0EsTUFBTUMsU0FBa0QsR0FBR1IsS0FBSyxDQUFDLFVBQUFNLENBQUM7QUFBQSxXQUFJQSxDQUFDLENBQUNHLHNCQUFOO0FBQUEsR0FBRixDQUFoRTtBQUVBO0FBQ0o7QUFDQTs7QUFDSSxNQUFNQyxxQkFBcUIsR0FBRyxDQUMxQixxQkFEMEIsRUFFMUJkLGFBQWEsR0FBRyw2QkFBSCxHQUFtQyx5QkFGdEIsQ0FBOUI7O0FBSUEsTUFBTWUsbUJBQW1CLEdBQUcsU0FBdEJBLG1CQUFzQixDQUFDVCxFQUFEO0FBQUEsV0FBaUQsVUFBQ3JCLENBQUQ7QUFBQSxhQUFnQnFCLEVBQUUsQ0FBQ3JCLENBQUQsRUFBSTZCLHFCQUFKLENBQWxCO0FBQUEsS0FBakQ7QUFBQSxHQUE1Qjs7QUFFQSxNQUFNRSxjQUFjLEdBQUcsU0FBakJBLGNBQWlCLENBQUMvQixDQUFELEVBQWdCO0FBQ25DLFFBQUlBLENBQUMsQ0FBQ2dDLFlBQUYsQ0FBZSxnQkFBZixDQUFKLEVBQ0ksT0FBTyxDQUFQO0FBQ0osV0FBT0wsU0FBUyxDQUFDM0IsQ0FBRCxHQUFLLHlCQUFMLFNBQW1DNkIscUJBQW5DLEVBQWhCO0FBQ0gsR0FKRDs7QUFLQSxNQUFNSSxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLENBQUNqQyxDQUFELEVBQWdCO0FBQ3BDLFFBQUlBLENBQUMsQ0FBQ2dDLFlBQUYsQ0FBZSxnQkFBZixDQUFKLEVBQ0ksT0FBTyxDQUFQO0FBQ0osV0FBT1IsU0FBUyxDQUFDeEIsQ0FBRCxHQUFLLHdCQUFMLFNBQWtDNkIscUJBQWxDLEVBQWhCO0FBQ0gsR0FKRDtBQU9BO0FBQ0o7QUFDQTs7O0FBRUksTUFBTUssa0JBQWtCLEdBQUcsU0FBckJBLGtCQUFxQixDQUFDbEMsQ0FBRCxFQUErQjtBQUN0RCxRQUFNbUMsQ0FBQyxHQUFHbkMsQ0FBQyxDQUFDZ0MsWUFBRixDQUFlLHdCQUFmLENBQVY7O0FBQ0EsUUFBSTtBQUNBLGFBQU9HLENBQUMsR0FBR0MsUUFBUSxDQUFDRCxDQUFELEVBQUksRUFBSixDQUFYLEdBQXFCLElBQTdCO0FBQ0gsS0FGRCxDQUVFLE9BQU9uQyxDQUFQLEVBQVU7QUFDUixZQUFNcUMsS0FBSyx5REFBa0RGLENBQWxELEVBQVg7QUFDSDtBQUNKLEdBUEQ7O0FBVUEsTUFBTUcsV0FBVyxHQUFHLFNBQWRBLFdBQWMsQ0FBQ0MsRUFBRCxFQUF3QjtBQUN4QyxRQUFNQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixTQUF2QixDQUFmO0FBQ0EsUUFBTTlDLENBQUMsR0FBRzZDLFFBQVEsQ0FBQ0UsY0FBVCxDQUF3QkosRUFBeEIsQ0FBVjtBQUNBLFdBQVFDLE1BQU0sSUFBSTVDLENBQVgsR0FBZ0JLLEtBQUssQ0FBQ0MsSUFBTixDQUFXc0MsTUFBTSxDQUFDSSxRQUFsQixFQUE0QkMsT0FBNUIsQ0FBb0NqRCxDQUFwQyxDQUFoQixHQUF5RCxDQUFDLENBQWpFO0FBQ0gsR0FKRDtBQU9BO0FBQ0o7QUFDQTs7O0FBQ0ksTUFBTUgsUUFBYSxHQUFHO0FBQ2xCc0MsSUFBQUEsY0FBYyxFQUFkQSxjQURrQjtBQUVsQkUsSUFBQUEsZUFBZSxFQUFmQSxlQUZrQjtBQUdsQkMsSUFBQUEsa0JBQWtCLEVBQWxCQSxrQkFIa0I7QUFJbEJJLElBQUFBLFdBQVcsRUFBWEE7QUFKa0IsR0FBdEI7O0FBUUEsTUFBSTVDLGlCQUFKLEVBQXVCO0FBQ25CO0FBQ0FELElBQUFBLFFBQVEsQ0FBQytCLFNBQVQsR0FBcUJBLFNBQXJCO0FBQ0EvQixJQUFBQSxRQUFRLENBQUNrQyxTQUFULEdBQXFCQSxTQUFyQjtBQUNIOztBQUVELFNBQU9sQyxRQUFQO0FBQ0gsQ0EvRkEsQ0FBRCIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUy5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscy5cblxuICAgICAgICB3aW5kb3cuV2VieWFybnMgPSBmYWN0b3J5KCk7XG4gICAgfVxufSgoZXhwb3NlQWxsRm9yVGVzdHM6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuXG4gICAgY29uc3QgY29tcG9zZSA9IDxBLCBCLCBDPihmOiAoYXJnOiBBKSA9PiBCLCBnOiAoYXJnOiBCKSA9PiBDKTogKGFyZzogQSkgPT4gQyA9PiB4ID0+IGcoZih4KSk7XG4gICAgY29uc3QgYXR0cmlidXRlTmFtZXM6IChlOiBFbGVtZW50KSA9PiBzdHJpbmdbXSA9IChlOiBFbGVtZW50KSA9PiBBcnJheS5mcm9tKGUuYXR0cmlidXRlcykubWFwKGEgPT4gYS5uYW1lKTtcbiAgICBjb25zdCBvbmVPZkNvbnRhaW5lZEluID0gPFQ+KGEyOiBBcnJheTxUPikgPT4gKGExOiBBcnJheTxUPikgPT4gYTEuc29tZShyID0+IGEyLmluY2x1ZGVzKHIpKTtcbiAgICBjb25zdCBjb250YWluc09uZU9mQXR0cmlidXRlcyA9IChuYW1lczogc3RyaW5nW10pID0+IGNvbXBvc2UoYXR0cmlidXRlTmFtZXMsIG9uZU9mQ29udGFpbmVkSW4obmFtZXMpKTtcblxuICAgIGNvbnN0IGlzVG91Y2hEZXZpY2U6IGJvb2xlYW4gPSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fFxuICAgICAgICAobmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMCkgfHxcbiAgICAgICAgKG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzID4gMCk7XG5cbiAgICAvKioqKioqXG4gICAgICogQ291bnQgdGhlIG51bWJlciBvZiBkaXJlY3Qgc2libGluZ3MgbWF0Y2hpbmcgYSBzZWxlY3RvcixcbiAgICAgKioqKioqL1xuICAgIGNvbnN0IGNvdW50ID0gKHNiOiAoZTogRWxlbWVudCkgPT4gRWxlbWVudCB8IG51bGwpID0+IHtcbiAgICAgICAgY29uc3QgZm4gPSAoZTogRWxlbWVudCwgYXR0cmlidXRlTmFtZXM6IHN0cmluZ1tdLCBpID0gMCk6IG51bWJlciA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gc2IoZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV4dCAmJiBjb250YWluc09uZU9mQXR0cmlidXRlcyhhdHRyaWJ1dGVOYW1lcykobmV4dCkgPyBmbihuZXh0LCBhdHRyaWJ1dGVOYW1lcywgaSArIDEpIDogaTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZuXG4gICAgfTtcblxuXG4gICAgY29uc3QgY291bnROZXh0OiAoZTogRWxlbWVudCwgbmFtZXM6IHN0cmluZ1tdKSA9PiBudW1iZXIgPSBjb3VudChuID0+IG4ubmV4dEVsZW1lbnRTaWJsaW5nKTtcbiAgICBjb25zdCBjb3VudFByZXY6IChlOiBFbGVtZW50LCBuYW1lczogc3RyaW5nW10pID0+IG51bWJlciA9IGNvdW50KG4gPT4gbi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKTtcblxuICAgIC8qKioqKipcbiAgICAgKiBDb3VudCB0aGUgbnVtYmVyIG9mIGRpcmVjdCBoaWRkZW4gc2VjdGlvbnNcbiAgICAgKioqKioqL1xuICAgIGNvbnN0IGdlbmVyaWNIaWRpbmdFbGVtZW50cyA9IFtcbiAgICAgICAgXCJkYXRhLWhpZGRlbi1zZWN0aW9uXCIsXG4gICAgICAgIGlzVG91Y2hEZXZpY2UgPyBcImRhdGEtbm9uLXRvdWNoLW9ubHktc2VjdGlvblwiIDogXCJkYXRhLXRvdWNoLW9ubHktc2VjdGlvblwiXG4gICAgXTtcbiAgICBjb25zdCBjb3VudEhpZGRlblNpYmxpbmdzID0gKGZuOiAoZTogRWxlbWVudCwgbmFtZXM6IHN0cmluZ1tdKSA9PiBudW1iZXIpID0+IChlOiBFbGVtZW50KSA9PiBmbihlLCBnZW5lcmljSGlkaW5nRWxlbWVudHMpO1xuXG4gICAgY29uc3Qgbm9PZkhpZGRlbkxlZnQgPSAoZTogRWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG9zbGlkZVwiKSlcbiAgICAgICAgICAgIHJldHVybiAwXG4gICAgICAgIHJldHVybiBjb3VudFByZXYoZSwgW1wiZGF0YS1yaWdodC1vbmx5LXNlY3Rpb25cIiwgLi4uZ2VuZXJpY0hpZGluZ0VsZW1lbnRzXSk7XG4gICAgfVxuICAgIGNvbnN0IG5vT2ZIaWRkZW5SaWdodCA9IChlOiBFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmIChlLmdldEF0dHJpYnV0ZShcImRhdGEtYXV0b3NsaWRlXCIpKVxuICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgcmV0dXJuIGNvdW50TmV4dChlLCBbXCJkYXRhLWxlZnQtb25seS1zZWN0aW9uXCIsIC4uLmdlbmVyaWNIaWRpbmdFbGVtZW50c10pO1xuICAgIH1cblxuXG4gICAgLyoqKioqKlxuICAgICAqIFN1cHBvcnQgZm9yIG5leHQtc2xpZGUtaWR4XG4gICAgICoqKioqKi9cblxuICAgIGNvbnN0IGdldE5leHRTbGlkZUluZGV4SCA9IChlOiBFbGVtZW50KTogbnVtYmVyIHwgbnVsbCA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmdldEF0dHJpYnV0ZShcImRhdGEtbmV4dC1zbGlkZS1pbmRleGhcIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gcyA/IHBhcnNlSW50KHMsIDEwKSA6IG51bGxcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYGRhdGEtbmV4dC1zbGlkZS1pbmRleGgsIG11c3QgYmUgYSBudW1iZXIsIGdvdCAke3N9YCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBjb25zdCBsb29rdXBJbmRleCA9IChpZDogc3RyaW5nKTogbnVtYmVyID0+IHtcbiAgICAgICAgY29uc3Qgc2xpZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXNcIik7XG4gICAgICAgIGNvbnN0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIHJldHVybiAoc2xpZGVzICYmIGYpID8gQXJyYXkuZnJvbShzbGlkZXMuY2hpbGRyZW4pLmluZGV4T2YoZikgOiAtMTtcbiAgICB9O1xuXG5cbiAgICAvKioqKioqXG4gICAgICogRXhwb3J0c1xuICAgICAqKioqKiovXG4gICAgY29uc3QgV2VieWFybnM6IGFueSA9IHtcbiAgICAgICAgbm9PZkhpZGRlbkxlZnQsXG4gICAgICAgIG5vT2ZIaWRkZW5SaWdodCxcbiAgICAgICAgZ2V0TmV4dFNsaWRlSW5kZXhILFxuICAgICAgICBsb29rdXBJbmRleCxcbiAgICB9O1xuXG5cbiAgICBpZiAoZXhwb3NlQWxsRm9yVGVzdHMpIHtcbiAgICAgICAgLy8gRm9yIEplc3RcbiAgICAgICAgV2VieWFybnMuY291bnROZXh0ID0gY291bnROZXh0O1xuICAgICAgICBXZWJ5YXJucy5jb3VudFByZXYgPSBjb3VudFByZXY7XG4gICAgfVxuXG4gICAgcmV0dXJuIFdlYnlhcm5zO1xufSkpO1xuXG5cblxuXG5cblxuIl19