"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

(function (factory) {
  if ((typeof exports === "undefined" ? "undefined" : _typeof(exports)) === 'object') {
    // Node. Does not work with strict CommonJS.
    module.exports = factory(true);
  } else {
    // Browser globals.
    // @ts-ignore
    window.Webyarns = factory();
  }
})(function () {
  var exposeAllForTests = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

  var compose = function compose(f, g) {
    return function (x) {
      return g(f(x));
    };
  };

  var attributeNames = function attributeNames(e) {
    return Array.from(e.attributes).map(function (a) {
      return a.name;
    });
  };

  var oneOfContainedIn = function oneOfContainedIn(a2) {
    return function (a1) {
      return a1.some(function (r) {
        return a2.includes(r);
      });
    };
  };

  var containsOneOfAttributes = function containsOneOfAttributes(names) {
    return compose(attributeNames, oneOfContainedIn(names));
  }; // @ts-ignore


  var isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
  /******
   * Count the number of direct siblings matching a selector,
   ******/

  var count = function count(sb) {
    var fn = function fn(e, attributeNames) {
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var next = sb(e);
      return next && containsOneOfAttributes(attributeNames)(next) ? fn(next, attributeNames, i + 1) : i;
    };

    return fn;
  };

  var countNext = count(function (n) {
    return n.nextElementSibling;
  });
  var countPrev = count(function (n) {
    return n.previousElementSibling;
  });
  /******
   * Count the number of direct hidden sections
   ******/

  var genericHidingElements = ["data-hidden-section", isTouchDevice ? "data-non-touch-only-section" : "data-touch-only-section"];

  var countHiddenSiblings = function countHiddenSiblings(fn) {
    return function (e) {
      return fn(e, genericHidingElements);
    };
  };

  var noOfHiddenLeft = function noOfHiddenLeft(e) {
    if (e.getAttribute("data-autoslide")) return countPrev(e, ["data-hide-from-autoslide"]);
    return countPrev(e, ["data-right-only-section"].concat(genericHidingElements));
  };

  var noOfHiddenRight = function noOfHiddenRight(e) {
    if (e.getAttribute("data-autoslide")) return countNext(e, ["data-hide-from-autoslide"]);
    return countNext(e, ["data-left-only-section"].concat(genericHidingElements));
  };
  /******
   * Support for next-slide-idx
   ******/


  var getNextSlideIndexH = function getNextSlideIndexH(e) {
    var s = e.getAttribute("data-next-slide-indexh");

    try {
      return s ? parseInt(s, 10) : null;
    } catch (e) {
      throw Error("data-next-slide-indexh, must be a number, got ".concat(s));
    }
  };

  var lookupIndex = function lookupIndex(id) {
    var slides = document.querySelector(".slides");
    var f = document.getElementById(id);
    return slides && f ? Array.from(slides.children).indexOf(f) : -1;
  };
  /******
   * Exports
   ******/


  var Webyarns = {
    noOfHiddenLeft: noOfHiddenLeft,
    noOfHiddenRight: noOfHiddenRight,
    getNextSlideIndexH: getNextSlideIndexH,
    lookupIndex: lookupIndex
  };

  if (exposeAllForTests) {
    // For Jest
    Webyarns.countNext = countNext;
    Webyarns.countPrev = countPrev;
  }

  return Webyarns;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9oZWxwZXJzLnRzIl0sIm5hbWVzIjpbImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwid2luZG93IiwiV2VieWFybnMiLCJleHBvc2VBbGxGb3JUZXN0cyIsImNvbXBvc2UiLCJmIiwiZyIsIngiLCJhdHRyaWJ1dGVOYW1lcyIsImUiLCJBcnJheSIsImZyb20iLCJhdHRyaWJ1dGVzIiwibWFwIiwiYSIsIm5hbWUiLCJvbmVPZkNvbnRhaW5lZEluIiwiYTIiLCJhMSIsInNvbWUiLCJyIiwiaW5jbHVkZXMiLCJjb250YWluc09uZU9mQXR0cmlidXRlcyIsIm5hbWVzIiwiaXNUb3VjaERldmljZSIsIm5hdmlnYXRvciIsIm1heFRvdWNoUG9pbnRzIiwibXNNYXhUb3VjaFBvaW50cyIsImNvdW50Iiwic2IiLCJmbiIsImkiLCJuZXh0IiwiY291bnROZXh0IiwibiIsIm5leHRFbGVtZW50U2libGluZyIsImNvdW50UHJldiIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJnZW5lcmljSGlkaW5nRWxlbWVudHMiLCJjb3VudEhpZGRlblNpYmxpbmdzIiwibm9PZkhpZGRlbkxlZnQiLCJnZXRBdHRyaWJ1dGUiLCJub09mSGlkZGVuUmlnaHQiLCJnZXROZXh0U2xpZGVJbmRleEgiLCJzIiwicGFyc2VJbnQiLCJFcnJvciIsImxvb2t1cEluZGV4IiwiaWQiLCJzbGlkZXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRFbGVtZW50QnlJZCIsImNoaWxkcmVuIiwiaW5kZXhPZiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFDLFdBQVVBLE9BQVYsRUFBbUI7QUFDaEIsTUFBSSxRQUFPQyxPQUFQLHlDQUFPQSxPQUFQLE9BQW1CLFFBQXZCLEVBQWlDO0FBQzdCO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0QsT0FBUCxHQUFpQkQsT0FBTyxDQUFDLElBQUQsQ0FBeEI7QUFDSCxHQUhELE1BR087QUFDSDtBQUVBO0FBQ0FHLElBQUFBLE1BQU0sQ0FBQ0MsUUFB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Ozs7QUFDSSxNQUFNSCxRQUFhLEdBQUc7QUFDbEJzQyxJQUFBQSxjQUFjLEVBQWRBLGNBRGtCO0FBRWxCRSxJQUFBQSxlQUFlLEVBQWZBLGVBRmtCO0FBR2xCQyxJQUFBQSxrQkFBa0IsRUFBbEJBLGtCQUhrQjtBQUlsQkksSUFBQUEsV0FBVyxFQUFYQTtBQUprQixHQUF0Qjs7QUFRQSxNQUFJNUMsaUJBQUosRUFBdUI7QUFDbkI7QUFDQUQsSUFBQUEsUUFBUSxDQUFDK0IsU0FBVCxHQUFxQkEsU0FBckI7QUFDQS9CLElBQUFBLFFBQVEsQ0FBQ2tDLFNBQVQsR0FBcUJBLFNBQXJCO0FBQ0g7O0FBRUQsU0FBT2xDLFFBQVA7QUFDSCxDQS9GQSxDQUFEIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzLlxuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgd2luZG93LldlYnlhcm5zID0gZmFjdG9yeSgpO1xuICAgIH1cbn0oKGV4cG9zZUFsbEZvclRlc3RzOiBib29sZWFuID0gZmFsc2UpID0+IHtcblxuICAgIGNvbnN0IGNvbXBvc2UgPSA8QSwgQiwgQz4oZjogKGFyZzogQSkgPT4gQiwgZzogKGFyZzogQikgPT4gQyk6IChhcmc6IEEpID0+IEMgPT4geCA9PiBnKGYoeCkpO1xuICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWVzOiAoZTogRWxlbWVudCkgPT4gc3RyaW5nW10gPSAoZTogRWxlbWVudCkgPT4gQXJyYXkuZnJvbShlLmF0dHJpYnV0ZXMpLm1hcChhID0+IGEubmFtZSk7XG4gICAgY29uc3Qgb25lT2ZDb250YWluZWRJbiA9IDxUPihhMjogQXJyYXk8VD4pID0+IChhMTogQXJyYXk8VD4pID0+IGExLnNvbWUociA9PiBhMi5pbmNsdWRlcyhyKSk7XG4gICAgY29uc3QgY29udGFpbnNPbmVPZkF0dHJpYnV0ZXMgPSAobmFtZXM6IHN0cmluZ1tdKSA9PiBjb21wb3NlKGF0dHJpYnV0ZU5hbWVzLCBvbmVPZkNvbnRhaW5lZEluKG5hbWVzKSk7XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgaXNUb3VjaERldmljZTogYm9vbGVhbiA9ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8IChuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwKSB8fCAobmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKTtcblxuICAgIC8qKioqKipcbiAgICAgKiBDb3VudCB0aGUgbnVtYmVyIG9mIGRpcmVjdCBzaWJsaW5ncyBtYXRjaGluZyBhIHNlbGVjdG9yLFxuICAgICAqKioqKiovXG4gICAgY29uc3QgY291bnQgPSAoc2I6IChlOiBFbGVtZW50KSA9PiBFbGVtZW50IHwgbnVsbCkgPT4ge1xuICAgICAgICBjb25zdCBmbiA9IChlOiBFbGVtZW50LCBhdHRyaWJ1dGVOYW1lczogc3RyaW5nW10sIGkgPSAwKTogbnVtYmVyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBzYihlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXh0ICYmIGNvbnRhaW5zT25lT2ZBdHRyaWJ1dGVzKGF0dHJpYnV0ZU5hbWVzKShuZXh0KSA/IGZuKG5leHQsIGF0dHJpYnV0ZU5hbWVzLCBpICsgMSkgOiBpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZm5cbiAgICB9O1xuXG5cbiAgICBjb25zdCBjb3VudE5leHQ6IChlOiBFbGVtZW50LCBuYW1lczogc3RyaW5nW10pID0+IG51bWJlciA9IGNvdW50KG4gPT4gbi5uZXh0RWxlbWVudFNpYmxpbmcpO1xuICAgIGNvbnN0IGNvdW50UHJldjogKGU6IEVsZW1lbnQsIG5hbWVzOiBzdHJpbmdbXSkgPT4gbnVtYmVyID0gY291bnQobiA9PiBuLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpO1xuXG4gICAgLyoqKioqKlxuICAgICAqIENvdW50IHRoZSBudW1iZXIgb2YgZGlyZWN0IGhpZGRlbiBzZWN0aW9uc1xuICAgICAqKioqKiovXG4gICAgY29uc3QgZ2VuZXJpY0hpZGluZ0VsZW1lbnRzID0gW1xuICAgICAgICBcImRhdGEtaGlkZGVuLXNlY3Rpb25cIixcbiAgICAgICAgaXNUb3VjaERldmljZSA/IFwiZGF0YS1ub24tdG91Y2gtb25seS1zZWN0aW9uXCIgOiBcImRhdGEtdG91Y2gtb25seS1zZWN0aW9uXCJcbiAgICBdO1xuICAgIGNvbnN0IGNvdW50SGlkZGVuU2libGluZ3MgPSAoZm46IChlOiBFbGVtZW50LCBuYW1lczogc3RyaW5nW10pID0+IG51bWJlcikgPT4gKGU6IEVsZW1lbnQpID0+IGZuKGUsIGdlbmVyaWNIaWRpbmdFbGVtZW50cyk7XG5cbiAgICBjb25zdCBub09mSGlkZGVuTGVmdCA9IChlOiBFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmIChlLmdldEF0dHJpYnV0ZShcImRhdGEtYXV0b3NsaWRlXCIpKVxuICAgICAgICAgICAgcmV0dXJuIGNvdW50UHJldihlLCBbXCJkYXRhLWhpZGUtZnJvbS1hdXRvc2xpZGVcIl0pO1xuICAgICAgICByZXR1cm4gY291bnRQcmV2KGUsIFtcImRhdGEtcmlnaHQtb25seS1zZWN0aW9uXCIsIC4uLmdlbmVyaWNIaWRpbmdFbGVtZW50c10pO1xuICAgIH1cbiAgICBjb25zdCBub09mSGlkZGVuUmlnaHQgPSAoZTogRWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG9zbGlkZVwiKSlcbiAgICAgICAgICAgIHJldHVybiBjb3VudE5leHQoZSwgW1wiZGF0YS1oaWRlLWZyb20tYXV0b3NsaWRlXCJdKTtcbiAgICAgICAgcmV0dXJuIGNvdW50TmV4dChlLCBbXCJkYXRhLWxlZnQtb25seS1zZWN0aW9uXCIsIC4uLmdlbmVyaWNIaWRpbmdFbGVtZW50c10pO1xuICAgIH1cblxuXG4gICAgLyoqKioqKlxuICAgICAqIFN1cHBvcnQgZm9yIG5leHQtc2xpZGUtaWR4XG4gICAgICoqKioqKi9cblxuICAgIGNvbnN0IGdldE5leHRTbGlkZUluZGV4SCA9IChlOiBFbGVtZW50KTogbnVtYmVyIHwgbnVsbCA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmdldEF0dHJpYnV0ZShcImRhdGEtbmV4dC1zbGlkZS1pbmRleGhcIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gcyA/IHBhcnNlSW50KHMsIDEwKSA6IG51bGxcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYGRhdGEtbmV4dC1zbGlkZS1pbmRleGgsIG11c3QgYmUgYSBudW1iZXIsIGdvdCAke3N9YCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBjb25zdCBsb29rdXBJbmRleCA9IChpZDogc3RyaW5nKTogbnVtYmVyID0+IHtcbiAgICAgICAgY29uc3Qgc2xpZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXNcIik7XG4gICAgICAgIGNvbnN0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIHJldHVybiAoc2xpZGVzICYmIGYpID8gQXJyYXkuZnJvbShzbGlkZXMuY2hpbGRyZW4pLmluZGV4T2YoZikgOiAtMTtcbiAgICB9O1xuXG5cbiAgICAvKioqKioqXG4gICAgICogRXhwb3J0c1xuICAgICAqKioqKiovXG4gICAgY29uc3QgV2VieWFybnM6IGFueSA9IHtcbiAgICAgICAgbm9PZkhpZGRlbkxlZnQsXG4gICAgICAgIG5vT2ZIaWRkZW5SaWdodCxcbiAgICAgICAgZ2V0TmV4dFNsaWRlSW5kZXhILFxuICAgICAgICBsb29rdXBJbmRleCxcbiAgICB9O1xuXG5cbiAgICBpZiAoZXhwb3NlQWxsRm9yVGVzdHMpIHtcbiAgICAgICAgLy8gRm9yIEplc3RcbiAgICAgICAgV2VieWFybnMuY291bnROZXh0ID0gY291bnROZXh0O1xuICAgICAgICBXZWJ5YXJucy5jb3VudFByZXYgPSBjb3VudFByZXY7XG4gICAgfVxuXG4gICAgcmV0dXJuIFdlYnlhcm5zO1xufSkpO1xuXG5cblxuXG5cblxuIl19